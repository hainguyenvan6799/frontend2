{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects_User\\\\lucky\\\\full_project\\\\frontend\\\\src\\\\components\\\\page\\\\Admin\\\\QuanLyTaiNguyen\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { BrowserRouter as Router, Switch, Route, Link, Redirect, useHistory } from \"react-router-dom\";\nimport api from '../../role_api';\nimport ThemTaiNguyen from './ThemTaiNguyen';\nimport ChinhSuaTaiNguyen from './ChinhSuaTaiNguyen';\nimport DanhSachTaiNguyen from './DanhSachTaiNguyen';\nimport NavBar from './NavBar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction TaiNguyen() {\n  _s();\n\n  const isMountedVal = React.useRef(1);\n  const history = useHistory();\n  const [resources, setResources] = React.useState([]);\n\n  const get_resources = async () => {\n    const result = await api.get('/get-resources');\n\n    if (result.data.status === true) {\n      setResources([...result.data.resources]);\n    }\n  };\n\n  const updateState = callback => {\n    if (isMountedVal.current === 1) {\n      callback();\n    }\n  };\n\n  const create = async resource => {\n    const result = await api.post('/add-resource', resource);\n\n    if (result.data.status === true) {\n      const new_resource = result.data.resource;\n      setResources([...resources, {\n        resource_id: new_resource.resource_id,\n        resource_name: new_resource.resource_name\n      }]);\n      alert(\"Thêm tài nguyên thành công.\");\n    } else {\n      alert(result.data.message);\n      history.push('/admin/resources');\n    }\n  };\n\n  const remove = async id => {\n    const result = await api.delete(`/delete-resource/${id}`);\n\n    if (result.data.status === true) {\n      setResources(resources.filter(resource => resource.resource_id !== id));\n    } else {\n      alert(result.data.message);\n    } // axios delete\n    // const new_data = users_roles.filter(item => item.id !== id);;\n    // setUsersRoles(new_data);\n\n  };\n\n  const update = async item => {\n    const {\n      resource_id\n    } = item;\n    const result = await api.put(`/update-resource/${resource_id}`, item);\n\n    if (result.data.status === true) {\n      const edited_resource = result.data.resource;\n      setResources(resources.map(resource => resource.resource_id !== resource_id ? resource : edited_resource));\n    } else {\n      alert(result.data.message);\n    } // const response = {}; //lấy dữ liệu trả về sau khi edit\n    // const { mauser } = response.data;;\n    // const new_data = users_roles.map((item) => {\n    //     return item.mauser !== mauser ? item : { ...response.data }\n    // })\n    // setUsersRoles(new_data);\n\n  };\n\n  React.useEffect(() => {\n    updateState(get_resources);\n    isMountedVal.current = 0;\n    return () => {\n      isMountedVal.current = 0;\n    };\n  }, [isMountedVal]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Router, {\n      children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/admin/resources\",\n          render: props => /*#__PURE__*/_jsxDEV(DanhSachTaiNguyen, { ...props,\n            resources: resources,\n            remove: remove\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 77\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/admin/add-resource\",\n          render: props => /*#__PURE__*/_jsxDEV(ThemTaiNguyen, { ...props,\n            handleCreate: create\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/admin/edit-resource\",\n          render: props => /*#__PURE__*/_jsxDEV(ChinhSuaTaiNguyen, { ...props,\n            handleUpdate: update\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 9\n  }, this);\n}\n\n_s(TaiNguyen, \"bDrr5FYueNXcCVEAw2IxNUmuJwA=\", false, function () {\n  return [useHistory];\n});\n\n_c = TaiNguyen;\nexport default TaiNguyen;\n\nvar _c;\n\n$RefreshReg$(_c, \"TaiNguyen\");","map":{"version":3,"sources":["C:/Projects_User/lucky/full_project/frontend/src/components/page/Admin/QuanLyTaiNguyen/index.js"],"names":["React","BrowserRouter","Router","Switch","Route","Link","Redirect","useHistory","api","ThemTaiNguyen","ChinhSuaTaiNguyen","DanhSachTaiNguyen","NavBar","TaiNguyen","isMountedVal","useRef","history","resources","setResources","useState","get_resources","result","get","data","status","updateState","callback","current","create","resource","post","new_resource","resource_id","resource_name","alert","message","push","remove","id","delete","filter","update","item","put","edited_resource","map","useEffect","props"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { BrowserRouter as Router, Switch, Route, Link, Redirect, useHistory } from \"react-router-dom\";\r\nimport api from '../../role_api';\r\nimport ThemTaiNguyen from './ThemTaiNguyen';\r\nimport ChinhSuaTaiNguyen from './ChinhSuaTaiNguyen';\r\nimport DanhSachTaiNguyen from './DanhSachTaiNguyen';\r\nimport NavBar from './NavBar';\r\n\r\nfunction TaiNguyen() {\r\n    const isMountedVal = React.useRef(1);\r\n    const history = useHistory();\r\n\r\n    const [resources, setResources] = React.useState([]);\r\n\r\n    const get_resources = async () => {\r\n        const result = await api.get('/get-resources');\r\n        if (result.data.status === true) {\r\n            setResources([...result.data.resources]);\r\n        }\r\n    }\r\n\r\n    const updateState = (callback) => {\r\n        if (isMountedVal.current === 1) {\r\n            callback();\r\n        }\r\n    }\r\n\r\n    const create = async (resource) => {\r\n        const result = await api.post('/add-resource', resource);\r\n        if(result.data.status === true)\r\n        {\r\n            const new_resource = result.data.resource;\r\n            setResources([...resources, {\r\n                resource_id: new_resource.resource_id,\r\n                resource_name: new_resource.resource_name,\r\n            }]);\r\n            alert(\"Thêm tài nguyên thành công.\")\r\n        }\r\n        else\r\n        {\r\n            alert(result.data.message);\r\n            history.push('/admin/resources')\r\n        }\r\n    }\r\n\r\n    const remove = async (id) => {\r\n        const result = await api.delete(`/delete-resource/${id}`);\r\n        if(result.data.status === true)\r\n        {\r\n            setResources(\r\n                resources.filter( resource => resource.resource_id !== id)\r\n            )\r\n        }\r\n        else\r\n        {\r\n            alert(result.data.message);\r\n        }\r\n        // axios delete\r\n\r\n        // const new_data = users_roles.filter(item => item.id !== id);;\r\n        // setUsersRoles(new_data);\r\n    }\r\n\r\n    const update = async (item) => {\r\n        const { resource_id } = item;\r\n        const result = await api.put(`/update-resource/${resource_id}`, item);\r\n        if(result.data.status === true)\r\n        {\r\n            const edited_resource = result.data.resource;\r\n            setResources(\r\n                resources.map( resource => resource.resource_id !== resource_id ? resource : edited_resource)\r\n            )\r\n        }\r\n        else\r\n        {\r\n            alert(result.data.message);\r\n        }\r\n        // const response = {}; //lấy dữ liệu trả về sau khi edit\r\n        // const { mauser } = response.data;;\r\n        // const new_data = users_roles.map((item) => {\r\n        //     return item.mauser !== mauser ? item : { ...response.data }\r\n        // })\r\n        // setUsersRoles(new_data);\r\n\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        updateState(get_resources);\r\n\r\n        isMountedVal.current = 0;\r\n\r\n        return () => {\r\n            isMountedVal.current = 0;\r\n        }\r\n    }, [isMountedVal])\r\n\r\n    return (\r\n        <div>\r\n\r\n            <Router>\r\n                <NavBar/>\r\n                <Switch>\r\n\r\n                    <Route exact path=\"/admin/resources\" render={(props) => <DanhSachTaiNguyen {...props} resources={resources} remove={remove} />} />\r\n\r\n                    <Route path=\"/admin/add-resource\" render={(props) => (\r\n                        <ThemTaiNguyen {...props} handleCreate={create} />\r\n                    )} />\r\n\r\n                    <Route\r\n                        path=\"/admin/edit-resource\"\r\n                        render={(props) => (\r\n                            <ChinhSuaTaiNguyen\r\n                                {...props}\r\n                                handleUpdate={update}\r\n                            />\r\n                        )}\r\n                    />\r\n\r\n                </Switch>\r\n            </Router>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TaiNguyen\r\n"]},"metadata":{},"sourceType":"module"}