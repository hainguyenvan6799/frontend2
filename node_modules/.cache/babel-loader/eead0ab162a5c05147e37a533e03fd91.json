{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects_User\\\\lucky\\\\full_project\\\\frontend\\\\src\\\\components\\\\page\\\\User\\\\MyPrivateHome.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router\";\nimport { channel } from \"../../../Store\"; // import State store\n\nimport { userContext } from \"../../../Store\"; // import addictional components:\n\nimport ClipLoader from \"react-spinners/ClipLoader\";\nimport axios from \"axios\";\nimport { css } from \"@emotion/core\"; // import basic components:\n\nimport Header from \"../../basic_components/Header\";\nimport Footer from \"../../basic_components/Footer\";\nimport { BrowserRouter as Router, Link, Route, Switch, useHistory } from \"react-router-dom\";\nimport FilesManagement from \"./Private/FilesManagement\";\nimport ClassFiles from \"./TaiLieu/ClassFiles\";\nimport ClassInfo from \"./ClassInfo\";\nimport LoadingClassFile from \"./TaiLieu/LoadingClassFile\";\nimport DienDan from \"./DienDan/index\";\nimport DanhSachSinhVien from \"./Class/index\";\nimport LoadingCheckIsCreateResource from \"./DienDan/LoadingCheckIsCreateResource\";\nimport LoadingAccessRightsForum from \"./DienDan/LoadingAccessRights\";\nimport TaiLieu from \"./TaiLieuNew\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const overide = css`\n  margin-top: 300px;\n  width: 150px;\n  height: 150px;\n`;\n\nfunction MyPrivateHome(props) {\n  _s();\n\n  const history = useHistory(); // declare context\n\n  const [user, setUser] = useContext(userContext);\n  const [accessRights, setAccessRights] = React.useState({});\n  const [accessRightsForum, setAccessRightsForum] = React.useState({});\n  const [privateInfo, setPrivateInfo] = React.useState({\n    tenlop: \"\",\n    nienkhoa: \"\",\n    malop: \"\",\n    tengiangvien: \"\",\n    sodienthoai: \"\",\n    emailgiaovien: \"\"\n  }); // declare this component state:\n\n  const [files, setFiles] = useState([]);\n  const [tailieu, setTaiLieu] = useState([]);\n  const [tailieuPending, setTaiLieuPending] = useState([]);\n  const [isCreateResource, setIsCreateResource] = useState(null);\n  const [isCreateTopicResource, setIsCreateTopicResource] = useState(null); // destructuring\n\n  const {\n    mauser,\n    is_updated_info\n  } = user;\n\n  const handleDelete = async filename => {\n    const response = await axios.post(\"/api/update-private-file-of-user\", {\n      filename: filename,\n      mauser: mauser\n    });\n    console.log(response.data.status);\n    console.log(response.data.message);\n    const new_data = files.filter(item => item.filename !== filename);\n    setFiles(new_data);\n  };\n\n  const handleUploadFile = async formdata => {\n    const result = await axios.post(\"/api/upload-file-aws\", formdata);\n\n    if (result.data.status) {\n      const new_files = result.data.result.original.files;\n      setFiles([...new_files]);\n    } else {\n      console.log(result.data.message);\n    }\n  };\n\n  const handleDeleteTaiLieu = async (id, pending) => {\n    // alert(id);\n    const result = await axios.delete(`/api/xoa-tai-lieu/${id}`); // if (result.data.status) {\n    // if (pending === \"pending\") {\n    //   const new_data = tailieuPending.filter((item) => item._id !== id);\n    //   setTaiLieuPending(new_data);\n    // } else {\n    //   // thực hiện lại setTaiLieu\n    //   const new_data = tailieu.filter((item) => item._id !== id);\n    //   setTaiLieu(new_data);\n    // }\n    // }\n  };\n\n  const handleApprove = async id => {\n    const data = {\n      id: id\n    };\n    const result = await axios.post(\"/api/chap-nhan-tai-lieu\", data); // if (result.data.status) {\n    //   const item = result.data.data;\n    //   setTaiLieu((tailieu) => [...tailieu, item]);\n    //   const new_data_pending = tailieuPending.filter((item) => item._id !== id);\n    //   setTaiLieuPending(new_data_pending);\n    // }\n  }; // React.useEffect(() => {\n  //   console.log(tailieu);\n  //   channel.bind(\"App\\\\Events\\\\MyEvent\", function (data) {\n  //     const a = JSON.parse(JSON.stringify(data));\n  //     if (a.data.isDeleting) {\n  //       alert(\"đang ở trong delete\");\n  //       if (a.data.active === false) {\n  //         console.log(tailieuPending);\n  //         const new_data = tailieuPending.filter(\n  //           (item) => item._id !== a.data._id\n  //         );\n  //         setTaiLieuPending(new_data);\n  //       } else {\n  //         const new_data = tailieu.filter((item) => item._id !== a.data._id);\n  //         setTaiLieu(new_data);\n  //       }\n  //     }\n  //     if (a.data.isApprove) {\n  //       alert(\"đang trong duyệt\");\n  //       setTaiLieu((tailieu) => [...tailieu, a.data]);\n  //       const newDataTaiLieuPending = tailieuPending.filter(\n  //         (item) => item._id !== a.data._id\n  //       );\n  //       setTaiLieuPending(newDataTaiLieuPending);\n  //     }\n  //     if (a.data.isUpdate) {\n  //       console.log(tailieu);\n  //       alert(\"đang ở trong update\");\n  //       if (a.data.active === true) {\n  //         alert(\"active true\");\n  //         let newTaiLieu = tailieu.map((item) =>\n  //           item._id === a.data._id ? a.data : item\n  //         );\n  //         setTaiLieu(newTaiLieu);\n  //       } else {\n  //         alert(\"active false\");\n  //         console.log(a.data._id);\n  //         const new_tai_lieu = tailieu.filter(\n  //           (item) => item._id !== a.data._id\n  //         );\n  //         setTaiLieu(new_tai_lieu);\n  //         setTaiLieuPending((tailieu) => [...tailieu, a.data]);\n  //       }\n  //     }\n  //     if (a.data.isAdd) {\n  //       alert(\"đang ở trong add\");\n  //       if (a.data.active) {\n  //         setTaiLieu((tailieu) => [\n  //           ...tailieu,\n  //           { ...a.data, _id: a.data._id[\"$oid\"] },\n  //         ]);\n  //       } else {\n  //         setTaiLieuPending((tailieu) => [\n  //           ...tailieu,\n  //           { ...a.data, _id: a.data._id[\"$oid\"] },\n  //         ]);\n  //       }\n  //     }\n  //   });\n  //   return () => {};\n  // }, []);\n\n\n  const handleCreate = async (formdata, active) => {\n    const result = await axios.post(\"/api/tao-tai-lieu\", formdata); // sau này kiểm tra phân quyền để set tailieu hay setTaiLieuPending cho đúng\n    // if (result.data.status) {\n    //   if (active) {\n    //     setTaiLieu((tailieu) => [\n    //       ...tailieu,\n    //       { ...result.data.data, _id: result.data.data._id[\"$oid\"] },\n    //     ]);\n    //   } else {\n    //     setTaiLieuPending((tailieu) => [\n    //       ...tailieu,\n    //       { ...result.data.data, _id: result.data.data._id[\"$oid\"] },\n    //     ]);\n    //   }\n    // }\n  };\n\n  const handleEdit = async (formdata, active) => {\n    console.log(formdata);\n    const result = await axios.post(\"/api/sua-tai-lieu\", formdata); // console.log(result);\n    // if (result.data.status) {\n    //   if (active) {\n    //     setTaiLieu(\n    //       tailieu.map((item) =>\n    //         item._id === result.data.data._id ? result.data.data : item\n    //       )\n    //     );\n    //   } else {\n    //     const new_tai_lieu = tailieu.filter(\n    //       (item) => item._id !== result.data.data._id\n    //     );\n    //     setTaiLieu(new_tai_lieu);\n    //     setTaiLieuPending((tailieu) => [...tailieu, result.data.data]);\n    //   }\n    //   // history.push('/class-files')\n    // }\n  };\n\n  const CreateANewResourceTaiLieu = async (malop, nameOfResource) => {\n    if (user.group === \"gv\") {\n      const data = {\n        resource_id: `tl_${malop}`,\n        resource_name: nameOfResource\n      };\n      const response = await axios.post(\"/api/create-new-resource\", data);\n\n      if (response.data.status) {\n        setIsCreateResource(true);\n      }\n    } else {\n      alert(\"Bạn không có quyền tạo.\");\n    }\n  };\n\n  const CreateANewTopicResource = async (malop, nameOfResource) => {\n    console.log(\"đã click lần 2\");\n    const data = {\n      resource_id: `chude_${malop}`,\n      resource_name: nameOfResource\n    };\n    const response = await axios.post(\"/api/create-new-resource\", data);\n    console.log(response);\n\n    if (response.data.status) {\n      setIsCreateTopicResource(true);\n    }\n  };\n\n  const main_content = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Router, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"page\",\n          className: \"container-fluid mt-0\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"page-content\",\n            className: \"row\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"region-main-box\",\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(\"section\", {\n                id: \"region-main\",\n                className: \"col-12\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"notifications\",\n                  id: \"user-notifications\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  role: \"main\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    id: \"maincontent\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 274,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"my-1 my-sm-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row justify-content-center\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-xl-12 col-sm-8 \",\n                      children: [/*#__PURE__*/_jsxDEV(ClassInfo, { ...props,\n                        mauser: user.mauser,\n                        magiaovien: user.magiaovien,\n                        setFiles: setFiles,\n                        private_info: [privateInfo, setPrivateInfo]\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 278,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 286,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col-md-12\",\n                        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                          className: \"nav nav-pills flex-row\",\n                          id: \"myTab\",\n                          role: \"tablist\",\n                          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                            className: \"nav-item\",\n                            children: /*#__PURE__*/_jsxDEV(Link, {\n                              id: \"user\",\n                              name: \"user\",\n                              className: \"linkcustom nav-link\",\n                              id: \"home-tab\",\n                              \"data-toggle\": \"tab\",\n                              to: \"/files-management\",\n                              role: \"tab\",\n                              \"aria-controls\": \"home\",\n                              \"aria-selected\": \"true\",\n                              children: \"Qu\\u1EA3n l\\xFD t\\u1EC7p ri\\xEAng t\\u01B0\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 294,\n                              columnNumber: 31\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 293,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                            className: \"nav-item\",\n                            children: /*#__PURE__*/_jsxDEV(Link, {\n                              id: \"class\",\n                              name: \"class\",\n                              className: \"linkcustom nav-link\",\n                              id: \"profile-tab\",\n                              \"data-toggle\": \"tab\",\n                              to: \"/class-files\",\n                              role: \"tab\",\n                              \"aria-controls\": \"profile\",\n                              \"aria-selected\": \"false\",\n                              children: \"Xem t\\u1EC7p c\\u1EE7a l\\u1EDBp h\\u1ECDc\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 309,\n                              columnNumber: 31\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 308,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                            className: \"nav-item\",\n                            children: /*#__PURE__*/_jsxDEV(Link, {\n                              id: \"users_roles\",\n                              name: \"users_roles\",\n                              className: \"linkcustom nav-link\",\n                              id: \"profile-tab\",\n                              \"data-toggle\": \"tab\",\n                              to: \"/forum\",\n                              role: \"tab\",\n                              \"aria-controls\": \"profile\",\n                              \"aria-selected\": \"false\",\n                              children: \"Di\\u1EC5n \\u0111\\xE0n l\\u1EDBp h\\u1ECDc\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 325,\n                              columnNumber: 31\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 324,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                            className: \"nav-item\",\n                            children: /*#__PURE__*/_jsxDEV(Link, {\n                              id: \"students\",\n                              name: \"students\",\n                              className: \"linkcustom nav-link\",\n                              id: \"profile-tab\",\n                              \"data-toggle\": \"tab\",\n                              to: \"/students\",\n                              role: \"tab\",\n                              \"aria-controls\": \"profile\",\n                              \"aria-selected\": \"false\",\n                              children: \"Sinh vi\\xEAn\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 341,\n                              columnNumber: 31\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 340,\n                            columnNumber: 29\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 288,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 287,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 277,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"region-main-box\",\n          className: \"col-12\",\n          children: /*#__PURE__*/_jsxDEV(\"section\", {\n            id: \"region-main\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"course-content\",\n              children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"topics\",\n                children: /*#__PURE__*/_jsxDEV(\"li\", {\n                  id: \"section-0\",\n                  className: \"section main clearfix\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"content\",\n                    children: /*#__PURE__*/_jsxDEV(Switch, {\n                      children: [/*#__PURE__*/_jsxDEV(Route, {\n                        path: \"/files-management\",\n                        render: props => /*#__PURE__*/_jsxDEV(FilesManagement, { ...props,\n                          files: files,\n                          handleDelete: handleDelete,\n                          handleUploadFile: handleUploadFile\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 377,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 374,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Route, {\n                        path: \"/class-files\",\n                        render: props =>\n                        /*#__PURE__*/\n                        // <ClassFiles\n                        //   {...props}\n                        //   handleDelete={handleDeleteTaiLieu}\n                        //   handleApprove={handleApprove}\n                        //   handleCreate={handleCreate}\n                        //   handleEdit={handleEdit}\n                        //   setTaiLieu={setTaiLieu}\n                        //   setTaiLieuPending={setTaiLieuPending}\n                        //   tailieu={tailieu}\n                        //   tailieuPending={tailieuPending}\n                        //   privateInfo={privateInfo}\n                        //   accessRights={accessRights}\n                        //   isCreateResource={isCreateResource}\n                        //   CreateANewResourceTaiLieu={\n                        //     CreateANewResourceTaiLieu\n                        //   }\n                        //   user={user}\n                        // />\n                        _jsxDEV(TaiLieu, { ...props,\n                          privateInfo: privateInfo,\n                          accessRights: accessRights,\n                          isCreateResource: isCreateResource,\n                          CreateANewResourceTaiLieu: CreateANewResourceTaiLieu,\n                          userlogin: user\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 407,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 386,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Route, {\n                        path: \"/forum\",\n                        render: props => /*#__PURE__*/_jsxDEV(DienDan, { ...props,\n                          isCreateTopicResource: isCreateTopicResource,\n                          CreateANewTopicResource: CreateANewTopicResource,\n                          accessRightsForum: accessRightsForum,\n                          user: user,\n                          privateInfo: privateInfo\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 424,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 421,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Route, {\n                        path: \"/students\",\n                        component: props => /*#__PURE__*/_jsxDEV(DanhSachSinhVien, { ...props,\n                          userlogin: user\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 438,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 435,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 373,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 372,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this);\n  };\n\n  const full_page = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 9\n      }, this), main_content(), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 7\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [!user.name && !privateInfo.malop ? /*#__PURE__*/_jsxDEV(ClipLoader, {\n      color: \"green\",\n      css: overide\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 9\n    }, this) : full_page(), privateInfo.tenlop ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(LoadingClassFile, { ...props,\n        setAccessRights: setAccessRights,\n        setIsCreateResource: setIsCreateResource,\n        userlogin: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 9\n    }, this) : null, user.name ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(LoadingCheckIsCreateResource, {\n        userlogin: user,\n        setIsCreateTopicResource: setIsCreateTopicResource\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(LoadingAccessRightsForum, {\n        userlogin: user,\n        setAccessRightsForum: setAccessRightsForum\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 467,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MyPrivateHome, \"+HRARqr/pJdZL+YtGN//HerQJEc=\", false, function () {\n  return [useHistory];\n});\n\n_c = MyPrivateHome;\nexport default MyPrivateHome;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyPrivateHome\");","map":{"version":3,"sources":["C:/Projects_User/lucky/full_project/frontend/src/components/page/User/MyPrivateHome.js"],"names":["React","useContext","useEffect","useState","Redirect","channel","userContext","ClipLoader","axios","css","Header","Footer","BrowserRouter","Router","Link","Route","Switch","useHistory","FilesManagement","ClassFiles","ClassInfo","LoadingClassFile","DienDan","DanhSachSinhVien","LoadingCheckIsCreateResource","LoadingAccessRightsForum","TaiLieu","overide","MyPrivateHome","props","history","user","setUser","accessRights","setAccessRights","accessRightsForum","setAccessRightsForum","privateInfo","setPrivateInfo","tenlop","nienkhoa","malop","tengiangvien","sodienthoai","emailgiaovien","files","setFiles","tailieu","setTaiLieu","tailieuPending","setTaiLieuPending","isCreateResource","setIsCreateResource","isCreateTopicResource","setIsCreateTopicResource","mauser","is_updated_info","handleDelete","filename","response","post","console","log","data","status","message","new_data","filter","item","handleUploadFile","formdata","result","new_files","original","handleDeleteTaiLieu","id","pending","delete","handleApprove","handleCreate","active","handleEdit","CreateANewResourceTaiLieu","nameOfResource","group","resource_id","resource_name","alert","CreateANewTopicResource","main_content","magiaovien","full_page","name"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Redirect } from \"react-router\";\r\nimport { channel } from \"../../../Store\";\r\n\r\n// import State store\r\nimport { userContext } from \"../../../Store\";\r\n\r\n// import addictional components:\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\nimport axios from \"axios\";\r\nimport { css } from \"@emotion/core\";\r\n\r\n// import basic components:\r\nimport Header from \"../../basic_components/Header\";\r\nimport Footer from \"../../basic_components/Footer\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Link,\r\n  Route,\r\n  Switch,\r\n  useHistory,\r\n} from \"react-router-dom\";\r\n\r\nimport FilesManagement from \"./Private/FilesManagement\";\r\nimport ClassFiles from \"./TaiLieu/ClassFiles\";\r\nimport ClassInfo from \"./ClassInfo\";\r\nimport LoadingClassFile from \"./TaiLieu/LoadingClassFile\";\r\nimport DienDan from \"./DienDan/index\";\r\nimport DanhSachSinhVien from \"./Class/index\";\r\n\r\nimport LoadingCheckIsCreateResource from \"./DienDan/LoadingCheckIsCreateResource\";\r\nimport LoadingAccessRightsForum from \"./DienDan/LoadingAccessRights\";\r\nimport TaiLieu from \"./TaiLieuNew\";\r\n\r\nexport const overide = css`\r\n  margin-top: 300px;\r\n  width: 150px;\r\n  height: 150px;\r\n`;\r\n\r\nfunction MyPrivateHome(props) {\r\n  const history = useHistory();\r\n\r\n  // declare context\r\n  const [user, setUser] = useContext(userContext);\r\n\r\n  const [accessRights, setAccessRights] = React.useState({});\r\n  const [accessRightsForum, setAccessRightsForum] = React.useState({});\r\n\r\n  const [privateInfo, setPrivateInfo] = React.useState({\r\n    tenlop: \"\",\r\n    nienkhoa: \"\",\r\n    malop: \"\",\r\n    tengiangvien: \"\",\r\n    sodienthoai: \"\",\r\n    emailgiaovien: \"\",\r\n  });\r\n\r\n  // declare this component state:\r\n  const [files, setFiles] = useState([]);\r\n  const [tailieu, setTaiLieu] = useState([]);\r\n  const [tailieuPending, setTaiLieuPending] = useState([]);\r\n  const [isCreateResource, setIsCreateResource] = useState(null);\r\n  const [isCreateTopicResource, setIsCreateTopicResource] = useState(null);\r\n\r\n  // destructuring\r\n  const { mauser, is_updated_info } = user;\r\n\r\n  const handleDelete = async (filename) => {\r\n    const response = await axios.post(\"/api/update-private-file-of-user\", {\r\n      filename: filename,\r\n      mauser: mauser,\r\n    });\r\n    console.log(response.data.status);\r\n    console.log(response.data.message);\r\n    const new_data = files.filter((item) => item.filename !== filename);\r\n    setFiles(new_data);\r\n  };\r\n\r\n  const handleUploadFile = async (formdata) => {\r\n    const result = await axios.post(\"/api/upload-file-aws\", formdata);\r\n    if (result.data.status) {\r\n      const new_files = result.data.result.original.files;\r\n      setFiles([...new_files]);\r\n    } else {\r\n      console.log(result.data.message);\r\n    }\r\n  };\r\n\r\n  const handleDeleteTaiLieu = async (id, pending) => {\r\n    // alert(id);\r\n    const result = await axios.delete(`/api/xoa-tai-lieu/${id}`);\r\n    // if (result.data.status) {\r\n    // if (pending === \"pending\") {\r\n    //   const new_data = tailieuPending.filter((item) => item._id !== id);\r\n\r\n    //   setTaiLieuPending(new_data);\r\n    // } else {\r\n    //   // thực hiện lại setTaiLieu\r\n    //   const new_data = tailieu.filter((item) => item._id !== id);\r\n\r\n    //   setTaiLieu(new_data);\r\n    // }\r\n    // }\r\n  };\r\n\r\n  const handleApprove = async (id) => {\r\n    const data = {\r\n      id: id,\r\n    };\r\n    const result = await axios.post(\"/api/chap-nhan-tai-lieu\", data);\r\n    // if (result.data.status) {\r\n    //   const item = result.data.data;\r\n    //   setTaiLieu((tailieu) => [...tailieu, item]);\r\n\r\n    //   const new_data_pending = tailieuPending.filter((item) => item._id !== id);\r\n    //   setTaiLieuPending(new_data_pending);\r\n    // }\r\n  };\r\n\r\n  // React.useEffect(() => {\r\n  //   console.log(tailieu);\r\n  //   channel.bind(\"App\\\\Events\\\\MyEvent\", function (data) {\r\n  //     const a = JSON.parse(JSON.stringify(data));\r\n  //     if (a.data.isDeleting) {\r\n  //       alert(\"đang ở trong delete\");\r\n  //       if (a.data.active === false) {\r\n  //         console.log(tailieuPending);\r\n  //         const new_data = tailieuPending.filter(\r\n  //           (item) => item._id !== a.data._id\r\n  //         );\r\n\r\n  //         setTaiLieuPending(new_data);\r\n  //       } else {\r\n  //         const new_data = tailieu.filter((item) => item._id !== a.data._id);\r\n\r\n  //         setTaiLieu(new_data);\r\n  //       }\r\n  //     }\r\n\r\n  //     if (a.data.isApprove) {\r\n  //       alert(\"đang trong duyệt\");\r\n  //       setTaiLieu((tailieu) => [...tailieu, a.data]);\r\n\r\n  //       const newDataTaiLieuPending = tailieuPending.filter(\r\n  //         (item) => item._id !== a.data._id\r\n  //       );\r\n  //       setTaiLieuPending(newDataTaiLieuPending);\r\n  //     }\r\n\r\n  //     if (a.data.isUpdate) {\r\n  //       console.log(tailieu);\r\n  //       alert(\"đang ở trong update\");\r\n  //       if (a.data.active === true) {\r\n  //         alert(\"active true\");\r\n  //         let newTaiLieu = tailieu.map((item) =>\r\n  //           item._id === a.data._id ? a.data : item\r\n  //         );\r\n  //         setTaiLieu(newTaiLieu);\r\n  //       } else {\r\n  //         alert(\"active false\");\r\n\r\n  //         console.log(a.data._id);\r\n  //         const new_tai_lieu = tailieu.filter(\r\n  //           (item) => item._id !== a.data._id\r\n  //         );\r\n  //         setTaiLieu(new_tai_lieu);\r\n  //         setTaiLieuPending((tailieu) => [...tailieu, a.data]);\r\n  //       }\r\n  //     }\r\n\r\n  //     if (a.data.isAdd) {\r\n  //       alert(\"đang ở trong add\");\r\n  //       if (a.data.active) {\r\n  //         setTaiLieu((tailieu) => [\r\n  //           ...tailieu,\r\n  //           { ...a.data, _id: a.data._id[\"$oid\"] },\r\n  //         ]);\r\n  //       } else {\r\n  //         setTaiLieuPending((tailieu) => [\r\n  //           ...tailieu,\r\n  //           { ...a.data, _id: a.data._id[\"$oid\"] },\r\n  //         ]);\r\n  //       }\r\n  //     }\r\n  //   });\r\n  //   return () => {};\r\n  // }, []);\r\n\r\n  const handleCreate = async (formdata, active) => {\r\n    const result = await axios.post(\"/api/tao-tai-lieu\", formdata);\r\n\r\n    // sau này kiểm tra phân quyền để set tailieu hay setTaiLieuPending cho đúng\r\n    // if (result.data.status) {\r\n\r\n    //   if (active) {\r\n    //     setTaiLieu((tailieu) => [\r\n    //       ...tailieu,\r\n    //       { ...result.data.data, _id: result.data.data._id[\"$oid\"] },\r\n    //     ]);\r\n    //   } else {\r\n    //     setTaiLieuPending((tailieu) => [\r\n    //       ...tailieu,\r\n    //       { ...result.data.data, _id: result.data.data._id[\"$oid\"] },\r\n    //     ]);\r\n    //   }\r\n    // }\r\n  };\r\n\r\n  const handleEdit = async (formdata, active) => {\r\n    console.log(formdata);\r\n    const result = await axios.post(\"/api/sua-tai-lieu\", formdata);\r\n    // console.log(result);\r\n    // if (result.data.status) {\r\n    //   if (active) {\r\n    //     setTaiLieu(\r\n    //       tailieu.map((item) =>\r\n    //         item._id === result.data.data._id ? result.data.data : item\r\n    //       )\r\n    //     );\r\n    //   } else {\r\n    //     const new_tai_lieu = tailieu.filter(\r\n    //       (item) => item._id !== result.data.data._id\r\n    //     );\r\n    //     setTaiLieu(new_tai_lieu);\r\n    //     setTaiLieuPending((tailieu) => [...tailieu, result.data.data]);\r\n    //   }\r\n\r\n    //   // history.push('/class-files')\r\n    // }\r\n  };\r\n\r\n  const CreateANewResourceTaiLieu = async (malop, nameOfResource) => {\r\n    if (user.group === \"gv\") {\r\n      const data = {\r\n        resource_id: `tl_${malop}`,\r\n        resource_name: nameOfResource,\r\n      };\r\n      const response = await axios.post(\"/api/create-new-resource\", data);\r\n      if (response.data.status) {\r\n        setIsCreateResource(true);\r\n      }\r\n    } else {\r\n      alert(\"Bạn không có quyền tạo.\");\r\n    }\r\n  };\r\n\r\n  const CreateANewTopicResource = async (malop, nameOfResource) => {\r\n    console.log(\"đã click lần 2\");\r\n    const data = {\r\n      resource_id: `chude_${malop}`,\r\n      resource_name: nameOfResource,\r\n    };\r\n    const response = await axios.post(\"/api/create-new-resource\", data);\r\n    console.log(response);\r\n    if (response.data.status) {\r\n      setIsCreateTopicResource(true);\r\n    }\r\n  };\r\n\r\n  const main_content = () => {\r\n    return (\r\n      <div>\r\n        <Router>\r\n          <div id=\"page\" className=\"container-fluid mt-0\">\r\n            <div id=\"page-content\" className=\"row\">\r\n              <div id=\"region-main-box\" className=\"col-12\">\r\n                <section id=\"region-main\" className=\"col-12\">\r\n                  <span\r\n                    className=\"notifications\"\r\n                    id=\"user-notifications\"\r\n                  ></span>\r\n                  <div role=\"main\">\r\n                    <span id=\"maincontent\"></span>\r\n                    <div className=\"my-1 my-sm-5\"></div>\r\n                    <div className=\"row justify-content-center\">\r\n                      <div className=\"col-xl-12 col-sm-8 \">\r\n                        <ClassInfo\r\n                          {...props}\r\n                          mauser={user.mauser}\r\n                          magiaovien={user.magiaovien}\r\n                          setFiles={setFiles}\r\n                          private_info={[privateInfo, setPrivateInfo]}\r\n                        />\r\n\r\n                        <hr />\r\n                        <div className=\"col-md-12\">\r\n                          <ul\r\n                            className=\"nav nav-pills flex-row\"\r\n                            id=\"myTab\"\r\n                            role=\"tablist\"\r\n                          >\r\n                            <li className=\"nav-item\">\r\n                              <Link\r\n                                id=\"user\"\r\n                                name=\"user\"\r\n                                className={\"linkcustom nav-link\"}\r\n                                id=\"home-tab\"\r\n                                data-toggle=\"tab\"\r\n                                to=\"/files-management\"\r\n                                role=\"tab\"\r\n                                aria-controls=\"home\"\r\n                                aria-selected=\"true\"\r\n                              >\r\n                                Quản lý tệp riêng tư\r\n                              </Link>\r\n                            </li>\r\n                            <li className=\"nav-item\">\r\n                              <Link\r\n                                id=\"class\"\r\n                                name=\"class\"\r\n                                className={\"linkcustom nav-link\"}\r\n                                id=\"profile-tab\"\r\n                                data-toggle=\"tab\"\r\n                                to=\"/class-files\"\r\n                                role=\"tab\"\r\n                                aria-controls=\"profile\"\r\n                                aria-selected=\"false\"\r\n                              >\r\n                                Xem tệp của lớp học\r\n                              </Link>\r\n                            </li>\r\n\r\n                            <li className=\"nav-item\">\r\n                              <Link\r\n                                id=\"users_roles\"\r\n                                name=\"users_roles\"\r\n                                className={\"linkcustom nav-link\"}\r\n                                id=\"profile-tab\"\r\n                                data-toggle=\"tab\"\r\n                                to=\"/forum\"\r\n                                role=\"tab\"\r\n                                aria-controls=\"profile\"\r\n                                aria-selected=\"false\"\r\n                              >\r\n                                Diễn đàn lớp học\r\n                              </Link>\r\n                            </li>\r\n                            {/* {user.group === \"gv\" ? */}\r\n                            <li className=\"nav-item\">\r\n                              <Link\r\n                                id=\"students\"\r\n                                name=\"students\"\r\n                                className={\"linkcustom nav-link\"}\r\n                                id=\"profile-tab\"\r\n                                data-toggle=\"tab\"\r\n                                to=\"/students\"\r\n                                role=\"tab\"\r\n                                aria-controls=\"profile\"\r\n                                aria-selected=\"false\"\r\n                              >\r\n                                Sinh viên\r\n                              </Link>\r\n                            </li>\r\n                            {/* : null */}\r\n                            {/* } */}\r\n                          </ul>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </section>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div id=\"region-main-box\" className=\"col-12\">\r\n            <section id=\"region-main\">\r\n              <div className=\"course-content\">\r\n                <ul className=\"topics\">\r\n                  <li id=\"section-0\" className=\"section main clearfix\">\r\n                    <div className=\"content\">\r\n                      <Switch>\r\n                        <Route\r\n                          path=\"/files-management\"\r\n                          render={(props) => (\r\n                            <FilesManagement\r\n                              {...props}\r\n                              files={files}\r\n                              handleDelete={handleDelete}\r\n                              handleUploadFile={handleUploadFile}\r\n                            />\r\n                          )}\r\n                        />\r\n                        {/* {privateInfo.malop ? */}\r\n                        <Route\r\n                          path=\"/class-files\"\r\n                          render={(props) => (\r\n                            // <ClassFiles\r\n                            //   {...props}\r\n                            //   handleDelete={handleDeleteTaiLieu}\r\n                            //   handleApprove={handleApprove}\r\n                            //   handleCreate={handleCreate}\r\n                            //   handleEdit={handleEdit}\r\n                            //   setTaiLieu={setTaiLieu}\r\n                            //   setTaiLieuPending={setTaiLieuPending}\r\n                            //   tailieu={tailieu}\r\n                            //   tailieuPending={tailieuPending}\r\n                            //   privateInfo={privateInfo}\r\n                            //   accessRights={accessRights}\r\n                            //   isCreateResource={isCreateResource}\r\n                            //   CreateANewResourceTaiLieu={\r\n                            //     CreateANewResourceTaiLieu\r\n                            //   }\r\n                            //   user={user}\r\n                            // />\r\n                            <TaiLieu\r\n                              {...props}\r\n                              privateInfo={privateInfo}\r\n                              accessRights={accessRights}\r\n                              isCreateResource={isCreateResource}\r\n                              CreateANewResourceTaiLieu={\r\n                                CreateANewResourceTaiLieu\r\n                              }\r\n                              userlogin={user}\r\n                            />\r\n                          )}\r\n                        />\r\n                        {/* : null} */}\r\n\r\n                        <Route\r\n                          path=\"/forum\"\r\n                          render={(props) => (\r\n                            <DienDan\r\n                              {...props}\r\n                              isCreateTopicResource={isCreateTopicResource}\r\n                              CreateANewTopicResource={CreateANewTopicResource}\r\n                              accessRightsForum={accessRightsForum}\r\n                              user={user}\r\n                              privateInfo={privateInfo}\r\n                            />\r\n                          )}\r\n                        />\r\n\r\n                        <Route\r\n                          path=\"/students\"\r\n                          component={(props) => (\r\n                            <DanhSachSinhVien {...props} userlogin={user} />\r\n                          )}\r\n                        />\r\n                        {/* <Route path={props.path} component={props.component} user={user} /> */}\r\n                      </Switch>\r\n                    </div>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </section>\r\n          </div>\r\n        </Router>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const full_page = () => {\r\n    return (\r\n      <div>\r\n        {/* <Router> */}\r\n        <Header />\r\n        {main_content()}\r\n        <Footer />\r\n        {/* </Router> */}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {!user.name && !privateInfo.malop ? (\r\n        <ClipLoader color={\"green\"} css={overide} />\r\n      ) : (\r\n        full_page()\r\n      )}\r\n\r\n      {privateInfo.tenlop ? (\r\n        <div>\r\n          <LoadingClassFile\r\n            {...props}\r\n            setAccessRights={setAccessRights}\r\n            setIsCreateResource={setIsCreateResource}\r\n            userlogin={user}\r\n          />\r\n        </div>\r\n      ) : null}\r\n\r\n      {user.name ? (\r\n        <div>\r\n          <LoadingCheckIsCreateResource\r\n            userlogin={user}\r\n            setIsCreateTopicResource={setIsCreateTopicResource}\r\n          />\r\n          <LoadingAccessRightsForum\r\n            userlogin={user}\r\n            setAccessRightsForum={setAccessRightsForum}\r\n          />\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MyPrivateHome;\r\n"]},"metadata":{},"sourceType":"module"}