{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects_User\\\\lucky\\\\full_project\\\\frontend\\\\src\\\\components\\\\page\\\\User\\\\TaiLieu\\\\ClassFiles.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React from \"react\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport { mahoadulieu_postform } from \"../../security\";\nimport ChinhSuaTaiLieu from \"./ChinhSuaTaiLieu\";\nimport TaiLieu from \"./TaiLieu\";\nimport TaiLieuPending from \"./TaiLieuPending\";\nimport ThemTaiLieu from \"./ThemTaiLieu\";\nimport ClipLoader from \"react-spinners/ClipLoader\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { createElement as _createElement } from \"react\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ClassFiles(props) {\n  _s();\n\n  const [isLoading, setIsLoading] = React.useState(true);\n  var isMounted = true;\n\n  const handleDelete = async (id, pending) => {\n    props.handleDelete(id, pending);\n  };\n\n  const handleApprove = id => {\n    props.handleApprove(id);\n  };\n\n  const handleCreate = (formdata, active) => {\n    props.handleCreate(formdata, active);\n  };\n\n  const handleEdit = (formdata, active) => {\n    props.handleEdit(formdata, active);\n  };\n\n  const CreateANewResourceTaiLieu = (malop, nameOfResource) => {\n    props.CreateANewResourceTaiLieu(malop, nameOfResource);\n  };\n\n  const get_username_of_user = (arr, checkMauser) => {\n    const user = arr.find(({\n      mauser\n    }) => mauser === checkMauser);\n    return user.name;\n  };\n\n  const get_url_of_file = (arr, checkMatailieu) => {\n    const tailieu = arr.find(({\n      matailieu\n    }) => matailieu === checkMatailieu);\n    return tailieu.url;\n  };\n\n  const get_tailieu = async () => {\n    const data = {\n      // resource_id: mahoadulieu_postform(props.user.malop),\n      resource_id: mahoadulieu_postform(`tl_${props.user.malop}`)\n    };\n    const response = await axios.post(\"/api/get-tailieu-of-specific-class\", data);\n    console.log(\"t đang ở trang classfiles\", response);\n\n    if (response.data.status) {\n      const users = response.data.users;\n      const urls = response.data.urls;\n      response.data.data.map(item => {\n        if (isMounted) {\n          item.username = get_username_of_user(users, item.mauser);\n          item.url = get_url_of_file(urls, item.matailieu);\n\n          if (item.active) {\n            props.setTaiLieu(tailieu => [...tailieu, item]);\n          } else {\n            props.setTaiLieuPending(tailieuPending => [...tailieuPending, item]);\n          }\n\n          setIsLoading(false);\n        }\n      });\n    }\n  };\n\n  React.useEffect(() => {\n    get_tailieu();\n    return () => {\n      isMounted = false;\n      setIsLoading(false);\n    };\n  }, [props.user.malop]);\n  return isLoading ? /*#__PURE__*/_jsxDEV(ClipLoader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this) : props.isCreateResource !== null ? props.isCreateResource === true ? /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Router, {\n      children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"navbar navbar-expand-lg navbar-light bg-light\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"navbar-toggler\",\n          type: \"button\",\n          \"data-toggle\": \"collapse\",\n          \"data-target\": \"#navbarSupportedContent\",\n          \"aria-controls\": \"navbarSupportedContent\",\n          \"aria-expanded\": \"false\",\n          \"aria-label\": \"Toggle navigation\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"navbar-toggler-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"collapse navbar-collapse\",\n          id: \"navbarSupportedContent\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"navbar-nav mr-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"nav-item\",\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                className: \"nav-link\",\n                to: {\n                  pathname: `/them-tai-lieu`,\n                  state: {\n                    malop: props.privateInfo.malop,\n                    accessRights: props.accessRights,\n                    mauser: props.user.mauser,\n                    userlogin: props.user\n                  }\n                },\n                children: \"Th\\xEAm t\\xE0i li\\u1EC7u\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12\",\n          children: [props.tailieu.length !== 0 ? /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table table-striped\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"STT\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"T\\xEAn t\\xE0i li\\u1EC7u\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"T\\xEAn file\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Download\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Ng\\u01B0\\u1EDDi \\u0111\\u0103ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 139,\n                  columnNumber: 23\n                }, this), props.accessRights.allowUpdate || props.accessRights.allowDelete ? /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"H\\xE0nh \\u0111\\u1ED9ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 25\n                }, this) : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: props.tailieu.map((item, index) => {\n                return /*#__PURE__*/_createElement(TaiLieu, { ...props,\n                  key: index,\n                  index: index,\n                  item: item,\n                  handleDelete: handleDelete,\n                  accessRights: props.accessRights,\n                  userlogin: props.user,\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 25\n                  }\n                });\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Hi\\u1EC7n t\\u1EA1i ch\\u01B0a c\\xF3 t\\u1EC7p n\\xE0o\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 17\n          }, this), props.tailieuPending.length !== 0 ? /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table table-striped\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"STT\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"T\\xEAn t\\xE0i li\\u1EC7u\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"T\\xEAn file\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Ng\\u01B0\\u1EDDi \\u0111\\u0103ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"T\\xECnh tr\\u1EA1ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 23\n                }, this), props.accessRights.allowUpdate || props.accessRights.allowDelete ? /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"H\\xE0nh \\u0111\\u1ED9ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 25\n                }, this) : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: props.tailieuPending.map((item, index) => {\n                return /*#__PURE__*/_createElement(TaiLieuPending, { ...props,\n                  key: index,\n                  index: index,\n                  item: item,\n                  handleDelete: handleDelete,\n                  handleApprove: handleApprove,\n                  accessRights: props.accessRights,\n                  userlogin: props.user,\n                  __self: this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 25\n                  }\n                });\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Hi\\u1EC7n t\\u1EA1i ch\\u01B0a c\\xF3 t\\u1EC7p n\\xE0o c\\u1EA7n \\u0111\\u01B0\\u1EE3c approve\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-12\",\n        children: /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/them-tai-lieu\",\n            component: props => /*#__PURE__*/_jsxDEV(ThemTaiLieu, { ...props,\n              handleCreate: handleCreate,\n              privateInfo: props.privateInfo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/chinh-sua-tai-lieu\",\n            component: props => /*#__PURE__*/_jsxDEV(ChinhSuaTaiLieu, { ...props,\n              handleEdit: handleEdit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this)\n  }, void 0, false) : /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: () => CreateANewResourceTaiLieu(props.privateInfo.malop, `Tài liệu của lớp ${props.privateInfo.tenlop}`),\n    children: \"Nh\\u1EA5n v\\xE0o \\u0111\\xE2y \\u0111\\u1EC3 t\\u1EA1o m\\u1EDBi m\\u1ED9t resource\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 230,\n    columnNumber: 7\n  }, this) : \"...Loading...\";\n}\n\n_s(ClassFiles, \"Yt82d/dvZsn5nYh5sqDQjv+rJ38=\");\n\n_c = ClassFiles;\nexport default ClassFiles;\n\nvar _c;\n\n$RefreshReg$(_c, \"ClassFiles\");","map":{"version":3,"sources":["C:/Projects_User/lucky/full_project/frontend/src/components/page/User/TaiLieu/ClassFiles.js"],"names":["axios","React","BrowserRouter","Router","Switch","Route","Link","mahoadulieu_postform","ChinhSuaTaiLieu","TaiLieu","TaiLieuPending","ThemTaiLieu","ClipLoader","ClassFiles","props","isLoading","setIsLoading","useState","isMounted","handleDelete","id","pending","handleApprove","handleCreate","formdata","active","handleEdit","CreateANewResourceTaiLieu","malop","nameOfResource","get_username_of_user","arr","checkMauser","user","find","mauser","name","get_url_of_file","checkMatailieu","tailieu","matailieu","url","get_tailieu","data","resource_id","response","post","console","log","status","users","urls","map","item","username","setTaiLieu","setTaiLieuPending","tailieuPending","useEffect","isCreateResource","pathname","state","privateInfo","accessRights","userlogin","length","allowUpdate","allowDelete","index","tenlop"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React from \"react\";\r\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\r\nimport { mahoadulieu_postform } from \"../../security\";\r\nimport ChinhSuaTaiLieu from \"./ChinhSuaTaiLieu\";\r\nimport TaiLieu from \"./TaiLieu\";\r\nimport TaiLieuPending from \"./TaiLieuPending\";\r\nimport ThemTaiLieu from \"./ThemTaiLieu\";\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\n\r\nfunction ClassFiles(props) {\r\n  const [isLoading, setIsLoading] = React.useState(true);\r\n  var isMounted = true;\r\n\r\n  const handleDelete = async (id, pending) => {\r\n    props.handleDelete(id, pending);\r\n  };\r\n\r\n  const handleApprove = (id) => {\r\n    props.handleApprove(id);\r\n  };\r\n\r\n  const handleCreate = (formdata, active) => {\r\n    props.handleCreate(formdata, active);\r\n  };\r\n\r\n  const handleEdit = (formdata, active) => {\r\n    props.handleEdit(formdata, active);\r\n  };\r\n\r\n  const CreateANewResourceTaiLieu = (malop, nameOfResource) => {\r\n    props.CreateANewResourceTaiLieu(malop, nameOfResource);\r\n  };\r\n\r\n  const get_username_of_user = (arr, checkMauser) => {\r\n    const user = arr.find(({ mauser }) => mauser === checkMauser);\r\n    return user.name;\r\n  };\r\n\r\n  const get_url_of_file = (arr, checkMatailieu) => {\r\n    const tailieu = arr.find(({ matailieu }) => matailieu === checkMatailieu);\r\n    return tailieu.url;\r\n  };\r\n\r\n  const get_tailieu = async () => {\r\n    const data = {\r\n      // resource_id: mahoadulieu_postform(props.user.malop),\r\n      resource_id: mahoadulieu_postform(`tl_${props.user.malop}`),\r\n    };\r\n    const response = await axios.post(\r\n      \"/api/get-tailieu-of-specific-class\",\r\n      data\r\n    );\r\n    console.log(\"t đang ở trang classfiles\", response);\r\n    if (response.data.status) {\r\n      const users = response.data.users;\r\n      const urls = response.data.urls;\r\n      response.data.data.map((item) => {\r\n        if (isMounted) {\r\n          item.username = get_username_of_user(users, item.mauser);\r\n          item.url = get_url_of_file(urls, item.matailieu);\r\n\r\n          if (item.active) {\r\n            props.setTaiLieu((tailieu) => [...tailieu, item]);\r\n          } else {\r\n            props.setTaiLieuPending((tailieuPending) => [\r\n              ...tailieuPending,\r\n              item,\r\n            ]);\r\n          }\r\n          setIsLoading(false);\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    get_tailieu();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n      setIsLoading(false);\r\n    };\r\n  }, [props.user.malop]);\r\n\r\n  return isLoading ? (\r\n    <ClipLoader />\r\n  ) : props.isCreateResource !== null ? (\r\n    props.isCreateResource === true ? (\r\n      <>\r\n        <Router>\r\n          <nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\r\n            <button\r\n              className=\"navbar-toggler\"\r\n              type=\"button\"\r\n              data-toggle=\"collapse\"\r\n              data-target=\"#navbarSupportedContent\"\r\n              aria-controls=\"navbarSupportedContent\"\r\n              aria-expanded=\"false\"\r\n              aria-label=\"Toggle navigation\"\r\n            >\r\n              <span className=\"navbar-toggler-icon\"></span>\r\n            </button>\r\n\r\n            <div\r\n              className=\"collapse navbar-collapse\"\r\n              id=\"navbarSupportedContent\"\r\n            >\r\n              <ul className=\"navbar-nav mr-auto\">\r\n                <li className=\"nav-item\">\r\n                  <Link\r\n                    className=\"nav-link\"\r\n                    to={{\r\n                      pathname: `/them-tai-lieu`,\r\n                      state: {\r\n                        malop: props.privateInfo.malop,\r\n                        accessRights: props.accessRights,\r\n                        mauser: props.user.mauser,\r\n                        userlogin: props.user,\r\n                      },\r\n                    }}\r\n                  >\r\n                    Thêm tài liệu\r\n                  </Link>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </nav>\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              {props.tailieu.length !== 0 ? (\r\n                <table className=\"table table-striped\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>STT</th>\r\n                      <th>Tên tài liệu</th>\r\n                      <th>Tên file</th>\r\n                      <th>Download</th>\r\n                      <th>Người đăng</th>\r\n                      {props.accessRights.allowUpdate ||\r\n                      props.accessRights.allowDelete ? (\r\n                        <th>Hành động</th>\r\n                      ) : null}\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {props.tailieu.map((item, index) => {\r\n                      return (\r\n                        <TaiLieu\r\n                          {...props}\r\n                          key={index}\r\n                          index={index}\r\n                          item={item}\r\n                          handleDelete={handleDelete}\r\n                          accessRights={props.accessRights}\r\n                          userlogin={props.user}\r\n                        />\r\n                      );\r\n                    })}\r\n                  </tbody>\r\n                </table>\r\n              ) : (\r\n                <h5>Hiện tại chưa có tệp nào</h5>\r\n              )}\r\n\r\n              {props.tailieuPending.length !== 0 ? (\r\n                <table className=\"table table-striped\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>STT</th>\r\n                      <th>Tên tài liệu</th>\r\n                      <th>Tên file</th>\r\n                      <th>Người đăng</th>\r\n                      <th>Tình trạng</th>\r\n\r\n                      {props.accessRights.allowUpdate ||\r\n                      props.accessRights.allowDelete ? (\r\n                        <th>Hành động</th>\r\n                      ) : null}\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {props.tailieuPending.map((item, index) => {\r\n                      return (\r\n                        <TaiLieuPending\r\n                          {...props}\r\n                          key={index}\r\n                          index={index}\r\n                          item={item}\r\n                          handleDelete={handleDelete}\r\n                          handleApprove={handleApprove}\r\n                          accessRights={props.accessRights}\r\n                          userlogin={props.user}\r\n                        />\r\n                      );\r\n                    })}\r\n                  </tbody>\r\n                </table>\r\n              ) : (\r\n                <h5>Hiện tại chưa có tệp nào cần được approve</h5>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-md-12\">\r\n            <Switch>\r\n              <Route\r\n                exact\r\n                path=\"/them-tai-lieu\"\r\n                component={(props) => (\r\n                  <ThemTaiLieu\r\n                    {...props}\r\n                    handleCreate={handleCreate}\r\n                    privateInfo={props.privateInfo}\r\n                  />\r\n                )}\r\n              />\r\n              <Route\r\n                exact\r\n                path=\"/chinh-sua-tai-lieu\"\r\n                component={(props) => (\r\n                  <ChinhSuaTaiLieu {...props} handleEdit={handleEdit} />\r\n                )}\r\n              />\r\n            </Switch>\r\n          </div>\r\n        </Router>\r\n      </>\r\n    ) : (\r\n      <button\r\n        className=\"btn btn-primary\"\r\n        onClick={() =>\r\n          CreateANewResourceTaiLieu(\r\n            props.privateInfo.malop,\r\n            `Tài liệu của lớp ${props.privateInfo.tenlop}`\r\n          )\r\n        }\r\n      >\r\n        Nhấn vào đây để tạo mới một resource\r\n      </button>\r\n    )\r\n  ) : (\r\n    \"...Loading...\"\r\n  );\r\n}\r\n\r\nexport default ClassFiles;\r\n"]},"metadata":{},"sourceType":"module"}